<div class="container mx-auto px-4 py-8">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold">Manage Products</h2>
    <button (click)="openAddModal()" 
            class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
      Add New Product
    </button>
  </div>

  <!-- Product Categories -->
  <div class="mb-6">
    <div class="flex space-x-4 overflow-x-auto pb-2">
      <button *ngFor="let category of categories" 
              (click)="selectedCategory = category; onCategoryChange()"
              [class.bg-blue-600]="selectedCategory === category"
              [class.text-white]="selectedCategory === category"
              class="px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
        {{ category }}
      </button>
    </div>
  </div>

  <!-- Products Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div *ngFor="let product of filteredProducts" 
         class="bg-white rounded-lg shadow-md overflow-hidden">
      <img [src]="product.imageUrl" [alt]="product.name" 
           class="w-full h-48 object-cover">
      <div class="p-4">
        <h3 class="text-lg font-semibold mb-2">{{ product.name }}</h3>
        <p class="text-gray-600 text-sm mb-2">{{ product.description }}</p>
        <div class="flex justify-between items-center mb-2">
          <span class="text-blue-600 font-semibold">{{ product.price | currency }}</span>
          <span class="text-sm text-gray-500">Stock: {{ product.quantity }}</span>
        </div>
        <div class="flex justify-end space-x-2">
          <button (click)="openEditModal(product)"
                  class="text-blue-600 hover:text-blue-800 focus:outline-none">
            Edit
          </button>
          <button (click)="deleteProduct(product.id)"
                  class="text-red-600 hover:text-red-800 focus:outline-none">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Product Modal -->
  <div *ngIf="showAddModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
      <div class="mt-3">
        <h3 class="text-lg font-medium leading-6 text-gray-900 mb-4">Add New Product</h3>
        
        <form (ngSubmit)="addProduct()" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700">Name</label>
            <input type="text" [(ngModel)]="newProduct.name" name="name" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Description</label>
            <textarea [(ngModel)]="newProduct.description" name="description" rows="3" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"></textarea>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Price</label>
            <input type="number" [(ngModel)]="newProduct.price" name="price" step="0.01" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Quantity</label>
            <input type="number" [(ngModel)]="newProduct.quantity" name="quantity" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Category</label>
            <select [(ngModel)]="newProduct.category" name="category" required
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <option *ngFor="let category of categories" [value]="category">
                {{ category }}
              </option>
            </select>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Image URL</label>
            <input type="text" [(ngModel)]="newProduct.imageUrl" name="imageUrl" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>

          <div class="flex justify-end space-x-3">
            <button type="button" (click)="closeModals()"
                    class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
              Cancel
            </button>
            <button type="submit"
                    class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
              Save Product
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Edit Product Modal -->
  <div *ngIf="showEditModal && selectedProduct" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
      <div class="mt-3">
        <h3 class="text-lg font-medium leading-6 text-gray-900 mb-4">Edit Product</h3>
        
        <form (ngSubmit)="updateProduct()" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700">Name</label>
            <input type="text" [(ngModel)]="selectedProduct.name" name="name" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Description</label>
            <textarea [(ngModel)]="selectedProduct.description" name="description" rows="3" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"></textarea>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Price</label>
            <input type="number" [(ngModel)]="selectedProduct.price" name="price" step="0.01" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Quantity</label>
            <input type="number" [(ngModel)]="selectedProduct.quantity" name="quantity" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Category</label>
            <select [(ngModel)]="selectedProduct.category" name="category" required
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <option *ngFor="let category of categories" [value]="category">
                {{ category }}
              </option>
            </select>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Image URL</label>
            <input type="text" [(ngModel)]="selectedProduct.imageUrl" name="imageUrl" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>

          <div class="flex justify-end space-x-3">
            <button type="button" (click)="closeModals()"
                    class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
              Cancel
            </button>
            <button type="submit"
                    class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
              Update Product
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div> 